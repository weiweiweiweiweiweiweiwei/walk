<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <!-- RWD 關鍵 1: Viewport Meta Tag -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>步數計算機</title>
  <style>
    :root {
      --system-background: #f0f0f7;
      --card-background: #ffffff;
      --primary-text-color: #1d1d1f;
      --secondary-text-color: #6e6e73;
      --action-blue: #007aff;
      --font-family: -apple-system, BlinkMacSystemFont, "San Francisco", "Helvetica Neue", "Noto Sans TC", sans-serif;
    }

    body {
      font-family: var(--font-family);
      background-color: var(--system-background);
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .container {
      background-color: var(--card-background);
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      /* RWD 關鍵 3: 調整 Padding 適應小螢幕 */
      padding: 2.5rem 2rem; 
      max-width: 380px;
      width: 90%;
      text-align: center;
      transition: all 0.3s ease;
    }

    /* RWD 關鍵 2: Fluid Typography using clamp() */
    /* clamp(最小值, 理想值, 最大值) */
    /* vw = viewport width, 1vw 是螢幕寬度的 1% */

    h1 {
      color: var(--primary-text-color);
      /* 字體在 1.5rem (24px) 到 1.8rem (28.8px) 之間動態縮放 */
      font-size: clamp(1.5rem, 5vw, 1.8rem);
      font-weight: 600;
      margin-top: 0;
      margin-bottom: 0.5rem;
    }

    p {
      color: var(--secondary-text-color);
      /* 字體在 0.9rem (14.4px) 到 1rem (16px) 之間動態縮放 */
      font-size: clamp(0.9rem, 2.5vw, 1rem);
      margin-top: 0;
      margin-bottom: 2rem;
      line-height: 1.5;
    }

    .input-group {
      margin-bottom: 1.5rem;
    }

    #numberInput {
      font-family: var(--font-family);
      /* 字體在 1rem (16px) 到 1.2rem (19.2px) 之間動態縮放 */
      font-size: clamp(1rem, 4vw, 1.2rem);
      font-weight: 500;
      text-align: center;
      width: calc(100% - 2rem);
      padding: 0.8rem 1rem;
      border: 1.5px solid #e5e5e5;
      border-radius: 12px;
      background-color: #f9f9f9;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    #numberInput:focus {
      outline: none;
      border-color: var(--action-blue);
      box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
    }
    
    .result-area {
        margin-top: 2.5rem;
    }
    
    #resultText {
        /* 和 p 標籤使用相同的縮放規則 */
        font-size: clamp(0.9rem, 2.5vw, 1rem);
        color: var(--secondary-text-color);
        margin: 0;
    }
    
    #resultSteps {
      font-weight: 700;
      color: var(--primary-text-color);
      margin: 0.25rem 0 0 0;
      line-height: 1.2;
      opacity: 0;
      transition: opacity 0.5s ease;
      /* 結果數字是主角，給予最大膽的縮放範圍 */
      font-size: clamp(2.8rem, 15vw, 4rem);
    }

    #resultSteps.visible {
        opacity: 1;
    }

    /* RWD 關鍵 3: Media Query Breakpoint */
    /* 當螢幕寬度小於等於 360px 時 (例如 iPhone SE)，減少左右 padding */
    @media (max-width: 360px) {
        .container {
            padding: 2rem 1.25rem;
        }
    }

  </style>
</head>
<body>

  <div class="container">
    <h1>步數計算機</h1>
    <p>輸入您心中默數到的最後一個數字，即可換算為總步數。</p>

    <div class="input-group">
      <input 
        type="number" 
        id="numberInput" 
        placeholder="輸入" 
        min="1"
        oninput="calculateSteps()"
      >
    </div>
    
    <div class="result-area">
        <p id="resultText">總步數是</p>
        <h2 id="resultSteps">0</h2>
    </div>
  </div>

  <script>
    // ----- JavaScript 邏輯部分保持不變，因為它已經很高效了 -----
    const numberInput = document.getElementById('numberInput');
    const resultStepsEl = document.getElementById('resultSteps');

    const memo = {};
    const cumulativeSteps = { 0: 0 };
    let preCalculatedMax = 0;

    function numberToChinese(num) {
      if (memo[num]) return memo[num];
      if (num === 0) return "零";
      const digits = ["零", "一", "二", "三", "四", "五", "六", "七", "八", "九"];
      const units = ["", "十", "百", "千"];
      let str = "";
      const s = String(num);

      if (num < 10) return digits[num];
      
      if(s.length === 2) {
        const ten = Math.floor(num / 10);
        const one = num % 10;
        str = (ten > 1 ? digits[ten] : "") + units[1] + (one > 0 ? digits[one] : "");
        memo[num] = str;
        return str;
      }
      
      for (let i = 0; i < s.length; i++) {
        const digit = parseInt(s[i]);
        const unit = units[s.length - 1 - i];
        
        if (digit === 0) {
            if (i > 0 && s[i-1] !== '0' && i < s.length -1) {
                 if(!str.endsWith(digits[0])) str += digits[0];
            }
        } else {
             str += digits[digit] + unit;
        }
      }

      str = str.replace(/零+$/, "");
      memo[num] = str;
      return memo[num];
    }
    
    function calculateTotalSteps(maxNumber) {
        if (maxNumber <= 0 || isNaN(maxNumber)) return 0;
        if (maxNumber <= preCalculatedMax) return cumulativeSteps[maxNumber];

        let totalSteps = cumulativeSteps[preCalculatedMax];
        for (let i = preCalculatedMax + 1; i <= maxNumber; i++) {
            totalSteps += numberToChinese(i).length;
            cumulativeSteps[i] = totalSteps;
        }
        preCalculatedMax = maxNumber;
        return totalSteps;
    }

    function calculateSteps() {
      const value = parseInt(numberInput.value, 10);
      
      if (!value || value <= 0) {
        resultStepsEl.textContent = '0';
        resultStepsEl.classList.remove('visible');
        return;
      }
      
      const totalSteps = calculateTotalSteps(value);
      resultStepsEl.textContent = totalSteps.toLocaleString('en-US'); 
      resultStepsEl.classList.add('visible');
    }
  </script>
</body>
</html>
